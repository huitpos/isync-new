openapi: 3.0.0

components:
  securitySchemes:
    bearerAuth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - bearerAuth: []

info:
  title: iSync API

paths:
  /api/login:
    post:
      tags:
        - Auth
      summary: Login a user.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
                - email
                - password
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/activate-machine:
    post:
      tags:
        - POS Machine
      summary: Activate a machine.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                product_key:
                  type: string
                serial:
                  type: string
                model:
                  type: string
                android_id:
                  type: string
                manufacturer:
                  type: string
                board:
                  type: string
              required:
                - product_key
                - serial
                - model
                - android_id
                - manufacturer
                - board
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/companies/{companyId}:
    get:
      tags:
        - Sync From Server
      summary: Get company data by company ID.
      parameters:
        - in: path
          name: companyId
          schema:
            type: integer
          required: true
          description: Numeric ID of the company to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/branches/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get branch data by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/test-connection:
    get:
      tags:
        - Sync From Server
      summary: Test connection to the server.
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/cash-denominations:
    get:
      tags:
        - Sync From Server
      summary: Get all cash denominations.
      parameters:
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/departments/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all departments by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/categories/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all categories by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/sub-categories/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all sub categories by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/branch-users/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all users by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/payment-types/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all payment types by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/discount-types/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all discount types by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/charge-accounts/{branchId}:
    get:
      tags:
        - Sync From Server
      summary: Get all charge accounts by branch ID.
      parameters:
        - in: path
          name: branchId
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/branch-transactions:
    get:
      tags:
        - Sync From Server
      summary: Get all transactions by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send transaction to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                transaction_id:
                  type: integer
                pos_machine_id:
                  type: integer
                control_number:
                  type: string
                receipt_number:
                  type: string
                gross_sales:
                  type: number
                net_sales:
                  type: number
                vatable_sales:
                  type: number
                vat_exempt_sales:
                  type: number
                vat_amount:
                  type: number
                discount_amount:
                  type: number
                tender_amount:
                  type: number
                change:
                  type: number
                service_charge:
                  type: number
                type:
                  type: string
                cashier_id:
                  type: integer
                cashier_name:
                  type: string
                take_order_id:
                  type: integer
                  default: null
                take_order_name:
                  type: string
                total_unit_cost:
                  type: number
                total_void_amount:
                  type: number
                shift_number:
                  type: integer
                is_void:
                  type: boolean
                void_by_id:
                  type: integer
                  default: null
                void_by:
                  type: string
                void_at:
                  type: string
                  default: null
                is_back_out:
                  type: boolean
                is_back_out_id:
                  type: integer
                  default: null
                back_out_by:
                  type: string
                charge_account_id:
                  type: integer
                  default: null
                charge_account_name:
                  type: string
                is_account_receivable:
                  type: boolean
                is_sent_to_server:
                  type: boolean
                is_complete:
                  type: boolean
                completed_at:
                  type: string
                  default: null
                is_cut_off:
                  type: boolean
                  default: false
                cut_off_id:
                  type: integer
                cut_off_at:
                  type: string
                  default: null
                branch_id:
                  type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/branch-orders:
    get:
      tags:
        - Sync From Server
      summary: Get all orders by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send transaction to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                order_id:
                  type: integer
                pos_machine_id:
                  type: integer
                transaction_id:
                  type: integer
                product_id:
                  type: integer
                code:
                  type: string
                name:
                  type: string
                description:
                  type: string
                abbreviation:
                  type: string
                cost:
                  type: number
                qty:
                  type: number
                amount:
                  type: number
                original_amount:
                  type: number
                gross:
                  type: number
                total:
                  type: number
                total_cost:
                  type: number
                is_vatable:
                  type: boolean
                vat_amount:
                  type: number
                vatable_sales:
                  type: number
                vat_exempt_sales:
                  type: number
                discount_amount:
                  type: number
                department_id:
                  type: integer
                department_name:
                  type: string
                category_id:
                  type: integer
                category_name:
                  type: string
                subcategory_id:
                  type: integer
                subcategory_name:
                  type: string
                unit_id:
                  type: integer
                unit_name:
                  type: string
                is_void:
                  type: boolean
                void_by:
                  type: string
                void_at:
                  type: string
                  default: null
                is_back_out:
                  type: boolean
                is_back_out_id:
                  type: integer
                  default: null
                back_out_by:
                  type: string
                min_amount_sold:
                  type: number
                is_paid:
                  type: boolean
                is_sent_to_server:
                  type: boolean
                is_completed:
                  type: boolean
                completed_at:
                  type: string
                  default: null
                branch_id:
                  type: integer
                is_cut_off:
                  type: boolean
                cut_off_id:
                  type: integer
                cut_off_at:
                  type: string
                  default: null
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/branch-payments:
    get:
      tags:
        - Sync From Server
      summary: Get all payments by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send payments to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                payment_id:
                  type: integer
                pos_machine_id:
                  type: integer
                branch_id:
                  type: integer
                transaction_id:
                  type: integer
                payment_type_id:
                  type: integer
                payment_type_name:
                  type: string
                  default: null
                amount:
                  type: number
                other_information:
                  type: string
                  default: null
                is_advance_payment:
                  type: boolean
                is_cut_off:
                  type: boolean
                cut_off_id:
                  type: integer
                  default: null
                cut_off_at:
                  type: string
                  default: null
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/safekeeping:
    get:
      tags:
        - Sync From Server
      summary: Get all safekeeping data by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send safekeeping to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                safekeeping_id:
                  type: integer
                pos_machine_id:
                  type: integer
                branch_id:
                  type: integer
                amount:
                  type: number
                cashier_id:
                  type: integer
                cashier_name:
                  type: string
                  default: null
                authorize_id:
                  type: integer
                authorize_name:
                  type: string
                  default: null
                is_cut_off:
                  type: boolean
                  default: false
                cut_off_id:
                  type: integer
                  default: null
                cut_off_at:
                  type: string
                  default: null
                is_sent_to_server:
                  type: boolean
                  default: false
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/safekeeping-denominations:
    get:
      tags:
        - Sync From Server
      summary: Get all safekeeping denomination data by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send safekeeping denomination to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                branch_id:
                  type: integer
                pos_machine_id:
                  type: integer
                safekeeping_denomination_id:
                  type: integer
                safekeeping_id:
                  type: integer
                cash_denomination_id:
                  type: integer
                name:
                  type: string
                  default: null
                amount:
                  type: number
                qty:
                  type: number
                total:
                  type: number
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/end-of-days:
    get:
      tags:
        - Sync From Server
      summary: Get all end of day data by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send end of day to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                end_of_day_id:
                  type: integer
                pos_machine_id:
                  type: integer
                branch_id:
                  type: integer
                beginning_or:
                  type: string
                  default: null
                ending_or:
                  type: string
                  default: null
                beginning_amount:
                  type: number
                ending_amount:
                  type: number
                total_transactions:
                  type: integer
                gross_sales:
                  type: number
                net_sales:
                  type: number
                vatable_sales:
                  type: number
                vat_exempt_sales:
                  type: number
                vat_amount:
                  type: number
                vat_expense:
                  type: number
                void_amount:
                  type: number
                total_cash_payments:
                  type: number
                total_card_payments:
                  type: number
                total_online_payments:
                  type: number
                total_ar_payments:
                  type: number
                total_mobile_payments:
                  type: number
                total_change:
                  type: number
                senior_count:
                  type: integer
                senior_amount:
                  type: number
                pwd_count:
                  type: integer
                pwd_amount:
                  type: number
                others_count:
                  type: integer
                others_amount:
                  type: number
                others_json:
                  type: string
                total_payout:
                  type: number
                total_service_charge:
                  type: number
                total_discount_amount:
                  type: number
                total_ar_cash_redeemed_amount:
                  type: number
                total_ar_card_redeemed_amount:
                  type: number
                total_cost:
                  type: number
                total_sk:
                  type: number
                cashier_id:
                  type: integer
                cashier_name:
                  type: string
                  default: null
                admin_id:
                  type: integer
                admin_name:
                  type: string
                  default: null
                shift_number:
                  type: string
                is_sent_to_server:
                  type: boolean
                  default: false
                treg:
                  type: string
                  default: null
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
  /api/cut-offs:
    get:
      tags:
        - Sync From Server
      summary: Get all end of day data by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    post:
      tags:
        - Sync To Server
      summary: Send cut_off to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                cut_off_id:
                  type: integer
                end_of_day_id:
                  type: integer
                pos_machine_id:
                  type: integer
                branch_id:
                  type: integer
                beginning_or:
                  type: string
                  default: null
                ending_or:
                  type: string
                  default: null
                beginning_amount:
                  type: number
                ending_amount:
                  type: number
                total_transactions:
                  type: integer
                gross_sales:
                  type: number
                net_sales:
                  type: number
                vatable_sales:
                  type: number
                vat_exempt_sales:
                  type: number
                vat_amount:
                  type: number
                vat_expense:
                  type: number
                void_amount:
                  type: number
                total_cash_payments:
                  type: number
                total_card_payments:
                  type: number
                total_online_payments:
                  type: number
                total_ar_payments:
                  type: number
                total_mobile_payments:
                  type: number
                total_change:
                  type: number
                senior_count:
                  type: integer
                senior_amount:
                  type: number
                pwd_count:
                  type: integer
                pwd_amount:
                  type: number
                others_count:
                  type: integer
                others_amount:
                  type: number
                others_json:
                  type: string
                total_payout:
                  type: number
                total_service_charge:
                  type: number
                total_discount_amount:
                  type: number
                total_ar_cash_redeemed_amount:
                  type: number
                total_ar_card_redeemed_amount:
                  type: number
                total_cost:
                  type: number
                total_sk:
                  type: number
                cashier_id:
                  type: integer
                cashier_name:
                  type: string
                  default: null
                admin_id:
                  type: integer
                admin_name:
                  type: string
                  default: null
                shift_number:
                  type: string
                is_sent_to_server:
                  type: boolean
                  default: false
                treg:
                  type: string
                  default: null
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/discounts:
    post:
      tags:
        - Sync To Server
      summary: Send discounts to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                discount_id:
                  type: integer
                  minimum: 1
                pos_machine_id:
                  type: integer
                branch_id:
                  type: integer
                transaction_id:
                  type: integer
                custom_discount_id:
                  type: integer
                discount_type_id:
                  type: integer
                value:
                  type: number
                discount_amount:
                  type: number
                vat_exempt_amount:
                  type: number
                cashier_id:
                  type: integer
                authorize_id:
                  type: integer
                is_void:
                  type: boolean
                is_sent_to_server:
                  type: boolean
                is_cut_off:
                  type: boolean
                discount_name:
                  type: string
                type:
                  type: string
                cashier_name:
                  type: string
                authorize_name:
                  type: string
                customer_identification_number:
                  type: string
                customer_name:
                  type: string
                customer_address:
                  type: string
                void_by_id:
                  type: integer
                void_by:
                  type: string
                void_at:
                  type: string
                  default: null
                cut_off_id:
                  type: integer
                shift_number:
                  type: integer
                treg:
                  type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    get:
      tags:
        - Sync From Server
      summary: Get all discounts by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/discount-details:
    post:
      tags:
        - Sync To Server
      summary: Send discount details to the server.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: integer
                discount_details_id:
                  type: integer
                discount_id:
                  type: integer
                pos_machine_id:
                  type: integer
                branch_id:
                  type: integer
                custom_discount_id:
                  type: integer
                transaction_id:
                  type: integer
                order_id:
                  type: integer
                discount_type_id:
                  type: integer
                value:
                  type: number
                discount_amount:
                  type: number
                vat_exempt_amount:
                  type: number
                type:
                  type: string
                is_void:
                  type: boolean
                void_by_id:
                  type: number
                void_by:
                  type: string
                void_at:
                  type: string
                  default: null
                is_sent_to_server:
                  type: boolean
                is_cut_off:
                  type: boolean
                cut_off_id:
                  type: number
                is_vat_exempt:
                  type: boolean
                shift_number:
                  type: string
                treg:
                  type: string

      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
    get:
      tags:
        - Sync From Server
      summary: Get all discount details by branch ID and machine ID.
      parameters:
        - in: query
          name: branch_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the branch to get
        - in: query
          name: pos_machine_id
          schema:
            type: integer
          required: true
          description: ID of the machine to get
        - in: query
          name: device_id
          schema:
            type: integer
          required: true
          description: Numeric ID of the device
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string